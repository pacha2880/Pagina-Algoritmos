
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="image/one1.jpg">

    <title>One Code Man</title>

    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <style>
    body {
      padding-top: 70px;
      
    }
    </style>
  </head>

  <body class="text-center">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="index.html">
          <img src="image/one2.jpg" height="30">
          One Code Man
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample03" aria-controls="navbarsExample03" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExample03">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="problemas.html">Problemas</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="algoritmos.html">Algoritmos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="foro.html">Foro</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Información</a>
              <div class="dropdown-menu" aria-labelledby="dropdown">
                <a class="dropdown-item" href="informacion1.html">¿Qué es la programación competitiva?</a>
                <a class="dropdown-item" href="informacion2.html">¿Qué es la OBI?</a>
                <a class="dropdown-item" href="informacion3.html">¿Qué es la ICPC?</a>
              </div>
            </li>
          </ul>
          <form class="form-inline mt-2 mt-md-0 needs-validation" novalidate="">
            <input class="form-control mr-sm-2" type="text" placeholder="Buscar Usuarios" value="" required="">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Buscar</button>
          </form>
          <a class="btn btn-lg btn-dark" href="perfil1.html">
            <img src="image/ronaldo.jpg" height="24">
            Perfil
          </a>
          <a class="text-secondary" href="login.html">logout</a>
        </div>
      </div>
    </nav>
    
    <div class="container text-left mb-5 mt-3">
      <div class="container">
        <h2 class="pb-3 mb-4 font-italic border-bottom">
          Dijsktra
        </h2>

        <div class="blog-post">
          <h2 class="blog-post-title">Introduccion</h2>

          <p>Se le proporciona un gráfico ponderado dirigido o no dirigido con n vértices y m bordes. Los pesos de todos los bordes son no negativos. También se le da un vértice de inicio s. Este artículo trata sobre cómo encontrar las longitudes de las rutas más cortas desde un vértice de inicio a todos los demás vértices, y muestra las rutas más cortas.</p>
          <p>Este problema tambien es llamado caminos minimos de un solo origen.</p>
          <img src="image/graph-shortestpath.png" class="img-fluid" alt="Responsive image">
          <hr>
          
          <h2 class="blog-post-title">Algoritmo</h2>
          <p>Aquí hay un algoritmo descrito por el científico informático holandés Edsger W. Dijkstra en 1959.</p>
          <p>Vamos a crear una matriz d [] donde, para cada vértice v, almacenemos la longitud actual de la ruta más corta de s a v en d [v]. Inicialmente d [s] = 0, y para todos los demás vértices, esta longitud es igual a infinito. En la implementación, un número suficientemente grande (que se garantiza que es mayor que cualquier posible longitud de trayectoria) se elige como infinito.</p>
          <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mi>d</mi>
            <mo stretchy="false">[</mo>
            <mi>v</mi>
            <mo stretchy="false">]</mo>
            <mo>=</mo>
            <mi mathvariant="normal">&#x221E;<!-- ∞ --></mi>
            <mo>,</mo>
            <mtext>&#xA0;</mtext>
            <mi>v</mi>
            <mo>&#x2260;<!-- ≠ --></mo>
            <mi>s</mi>
          </math>
          <p>Además, mantenemos una matriz booleana u [] que almacena para cada vértice v si está marcado. Inicialmente todos los vértices están sin marcar:</p>
          <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mi>u</mi>
            <mo stretchy="false">[</mo>
            <mi>v</mi>
            <mo stretchy="false">]</mo>
            <mo>=</mo>
            <mrow class="MJX-TeXAtom-ORD">
              <mi mathvariant="normal">f</mi>
              <mi mathvariant="normal">a</mi>
              <mi mathvariant="normal">l</mi>
              <mi mathvariant="normal">s</mi>
              <mi mathvariant="normal">e</mi>
            </mrow>
          </math>
          <p>El algoritmo de Dijkstra se ejecuta para n iteraciones. En cada iteración se elige un vértice v como vértice no marcado que tiene el menor valor d [v]:</p>
          <p>Evidentemente, en la primera iteración se seleccionará el vértice de inicio s.</p>
          <p>El vértice seleccionado v está marcado. A continuación, desde el vértice se realizan relajaciones: se consideran todos los bordes de la forma (v, a) y, para cada vértice, el algoritmo intenta mejorar el valor d [a]. Si la longitud del borde actual es igual a len, el código para la relajación es:</p>
          <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mi>d</mi>
            <mo stretchy="false">[</mo>
            <mtext>to</mtext>
            <mo stretchy="false">]</mo>
            <mo>=</mo>
            <mo movablelimits="true" form="prefix">min</mo>
            <mo stretchy="false">(</mo>
            <mi>d</mi>
            <mo stretchy="false">[</mo>
            <mtext>to</mtext>
            <mo stretchy="false">]</mo>
            <mo>,</mo>
            <mi>d</mi>
            <mo stretchy="false">[</mo>
            <mi>v</mi>
            <mo stretchy="false">]</mo>
            <mo>+</mo>
            <mi>l</mi>
            <mi>e</mi>
            <mi>n</mi>
            <mo stretchy="false">)</mo>
          </math>
          <p>El vértice seleccionado v está marcado. A continuación, desde el vértice se realizan relajaciones: se consideran todos los bordes de la forma (v, a) y, para cada vértice, el algoritmo intenta mejorar el valor d [a]. Si la longitud del borde actual es igual a len, el código para la relajación es:</p>
          <p>Tenga en cuenta que si algunos vértices son inaccesibles desde el vértice inicial s, los valores d [v] para ellos permanecerán infinitos. Obviamente, las últimas iteraciones del algoritmo elegirán esos vértices, pero no se hará ningún trabajo útil para ellos. Por lo tanto, el algoritmo se puede detener tan pronto como el vértice seleccionado tenga una distancia infinita.</p>
          <hr>

          <h3>implementación</h3>
          <p>El algoritmo de Dijkstra realiza n iteraciones. En cada iteración selecciona un vértice no marcado v con el valor más bajo d [v], lo marca y verifica todos los bordes (v, a) intentando mejorar el valor d [a].</p>
          <p>El tiempo de ejecución del algoritmo consiste en:</p>
          <ul>
            <li>n busca un vértice con el valor más pequeño d [v] entre O (n) vértices sin marcar</li>
            <li>m intentos de relajacion</li>
          </ul>
          <p>Para la implementación más simple de estas operaciones en cada iteración, la búsqueda de vértices requiere operaciones O (n), y cada relajación se puede realizar en O (1). Por lo tanto, el comportamiento asintótico resultante del algoritmo es:</p>
          <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mi>O</mi>
            <mo stretchy="false">(</mo>
            <msup>
              <mi>n</mi>
              <mn>2</mn>
            </msup>
            <mo>+</mo>
            <mi>m</mi>
            <mo stretchy="false">)</mo>
          </math>
          <p>Esta complejidad es óptima para gráficos densos, es decir, cuando m≈n2. Sin embargo, en gráficos dispersos, cuando m es mucho más pequeño que el número máximo de bordes n2, el problema puede resolverse en complejidad O (nlogn + m). El algoritmo y la implementación se pueden encontrar en el artículo Dijkstra en gráficos dispersos.</p>
          <pre class="text-monospace">
const int INF = 1000000000;
vector<vector<pair<int, int>>> adj;

void dijkstra(int s, vector<int> & d, vector<int> & p) {
    int n = adj.size();
    d.assign(n, INF);
    p.assign(n, -1);
    vector<bool> u(n, false);

    d[s] = 0;
    for (int i = 0; i < n; i++) {
        int v = -1;
        for (int j = 0; j < n; j++) {
            if (!u[j] && (v == -1 || d[j] < d[v]))
                v = j;
        }

        if (d[v] == INF)
            break;

        u[v] = true;
        for (auto edge : adj[v]) {
            int to = edge.first;
            int len = edge.second;

            if (d[v] + len < d[to]) {
                d[to] = d[v] + len;
                p[to] = v;
            }
        }
    }
}
          </pre>
          <hr>

          <h3>Cuestionario</h3>
          <form action="http://127.0.0.1:5000/cuestionarioDijsktra" method="POST" id="cuestionario">
            <p>¿En un grafo bidireccional, Dijkstra funciona con aristas de peso negativo?</p>
            <div class="form-group form-row">
              <div class="form-check form-check-inline col">
                <input class="form-check-input" type="radio" name="pregunta1" id="exampleRadios1" value="option1" checked>
                <label class="form-check-label" for="incorrecta">
                  Si
                </label>
              </div>
              <div class="form-check form-check-inline col">
                <input class="form-check-input" type="radio" name="pregunta1" id="exampleRadios2" value="option2">
                <label class="form-check-label" for="correcta">
                  No
                </label>
              </div>
            </div>

            <p>¿Dijkstra funciona en un grafo con aristas repetidas de peso positivo?</p>

            <div class="form-group form-row">
              <div class="form-check form-check-inline col">
                <input class="form-check-input" type="radio" name="pregunta2" id="exampleRadios1" value="option1" checked>
                <label class="form-check-label" for="correcta">
                  Si
                </label>
              </div>
              <div class="form-check form-check-inline col">
                <input class="form-check-input" type="radio" name="pregunta2" id="exampleRadios2" value="option2">
                <label class="form-check-label" for="incorrecta">
                  No
                </label>
              </div>
            </div>
            <p class="btn btn-secondary" onclick="postCuestionario(); resultadoDeCuestionario();">Enviar respuestas</p>
              <div id="alertCuestionario" class="alert alert-success mt-2" role="alert" style="display:none;">
                  
              </div>
          </form>
          <hr>

          <h3>Problemas sugeridos</h3>
          <ul class="list-group">
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <a target="_blank" href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=24&page=show_problem&problem=870">Number Maze</a>
                <span id="veredictoProblema1" class="badge badge-secondary badge-pill">No resuelto</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <a target="_blank" href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&category=24&page=show_problem&problem=1927">Sending email</a>
                <span id="veredictoProblema2" class="badge badge-secondary badge-pill">No resuelto</span>
              </li>
          </ul>
          <hr>
          <!--form action=""-->
            <button class="btn btn-info" onclick="activarAlert()">Finalizar</button>
          <!--/form-->
          <br>
          <!-- {#if finalizado} en handlebars -->
          <div id="alertFinalizado" class="alert alert-success mt-2" role="alert" style="display:none;">
            ¡Tema finalizado! <br>
            ¡Ganaste una estrella! Puedes ver tu progreso en <a href="perfil1.html" class="alert-link">tu perfil</a> <br>
            <a href="algoritmos.html" class="alert-link">Volver a lista de Algoritmos</a>
          </div>
      </div>
    </div>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script>
      function postCuestionario() {
        var formData = JSON.stringify($("#cuestionario").serializeArray());
        var formJSON = JSON.parse(formData);
        var req = {};
        formJSON.forEach(obj => {
          req[obj.name] = obj.value;
        });
        console.log(req);
        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'http://127.0.0.1:5000/cuestionarioDijsktra', true);
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xhr.send( `pregunta1=${req.pregunta1}&pregunta2=${req.pregunta2}` );
        //xhr.send(`nombre=${nombre}`);
      }
    </script>
  <script>
    var nombreAlgoritmo = 'dijkstra';
    function activarAlert() {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', 'http://127.0.0.1:5000/', true);
      xhr.send();
      xhr.onreadystatechange = () => {
        if (xhr.readyState == 4 && xhr.status == 200) {
          let res = JSON.parse( xhr.response );
          console.log(res.algoritmos);
          console.log(res.algoritmos[nombreAlgoritmo]);
          if (res.algoritmos[nombreAlgoritmo] == true)
          {
            let alert = document.getElementById("alertFinalizado");
            alert.className = "alert alert-success mt-2";
            alert.innerHTML = 'Este algoritmo ya ha sido aprendido :D <br><a href="algoritmos.html" class="alert-link">Volver a lista de Algoritmos</a>'
          }
          else if (res.puntajes.dijkstra != 2) {
            let alert = document.getElementById("alertFinalizado");
            alert.className = "alert alert-warning mt-2";
            alert.innerHTML = 'Tiene que terminar correctamente el formulario';
          }
          else if (res.problemasSugeridos.dijkstra1 == false || res.problemasSugeridos.dijkstra2 == false) {
            let alert = document.getElementById("alertFinalizado");
            alert.className = "alert alert-warning mt-2";
            alert.innerHTML = 'Debe resolver todos los problemas sugeridos';
          }
          else
          {
            aumentarEstrella();
            actualizarAlgoritmo(nombreAlgoritmo);
            let alert = document.getElementById("alertFinalizado");
            alert.className = "alert alert-success mt-2";
            alert.innerHTML = `¡Tema finalizado! <br>¡Ganaste una estrella! Puedes ver tu progreso en <a href="perfil1.html" class="alert-link">tu perfil</a> <br><a href="algoritmos.html" class="alert-link">Volver a lista de Algoritmos</a>`;
          }
          ocultarAlert();
        }
      }
    }

    function aumentarEstrella() {
      var xhr = new XMLHttpRequest();
      xhr.open('POST', 'http://127.0.0.1:5000/actualizarEstrellas', true);
      xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
      xhr.send();
    }

    function ocultarAlert() {
      let alert = document.getElementById("alertFinalizado");
      alert.style.display = "block";
    }

    function actualizarAlgoritmo(nombre) {
      var xhr = new XMLHttpRequest();
      xhr.open('POST', 'http://127.0.0.1:5000/actualizarAlgoritmo/', true);
      xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
      xhr.send(`nombre=${nombre}`);
    }
    
    function resultadoDeCuestionario(){
      setTimeout(() => {
        let alert = document.getElementById("alertCuestionario");
        alert.style.display = "block";
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'http://127.0.0.1:5000/resultadoCuestionario/', true);
        xhr.send();
        xhr.onreadystatechange = () => {
          if (xhr.readyState == 4 && xhr.status == 200) {
            let res = JSON.parse( xhr.response );
            console.log(res);
            alert.innerHTML = `Puntaje: ${res.puntaje}`;
            if(res.puntaje < 2)
              alert.className = "alert alert-warning mt-2";
            else
              alert.className = "alert alert-success mt-2";
          }
        }
      }, 100);
    }
  </script>

  <script>
      var userID = 371974;
      // ronaldo0:  371974
      // MickyOr:   399158
      /*
        Number Maze:     870
        Sending email:  1927
      */
      var xhr = new XMLHttpRequest();
      xhr.open('GET', `https://uhunt.onlinejudge.org/api/subs-user/${userID}`, true);
      xhr.send();
      xhr.onreadystatechange = () => {
        if (xhr.readyState == 4 && xhr.status == 200) {
          let res = JSON.parse( xhr.response );
          console.log(res);
          res.subs.forEach(sub => {
            if ( sub[1] == 870 )
            {
              console.log("Hay envio del problema Number Maze");
              let veredicto = document.getElementById("veredictoProblema1");
              if (sub[2] == 90) {
                actualizarProblemasResueltos('dijkstra1');
                veredicto.className = "badge badge-success badge-pill";
                veredicto.innerHTML = "Resuelto";
              }
            }
            if ( sub[1] == 1927 )
            {
              console.log("Hay envio del problema Sending email");
              let veredicto = document.getElementById("veredictoProblema2");
              if (sub[2] == 90) {
                actualizarProblemasResueltos('dijkstra2');
                veredicto.className = "badge badge-success badge-pill";
                veredicto.innerHTML = "Resuelto";
              }
            }
          });
        }
      }

      function actualizarProblemasResueltos(nombre) {
        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'http://127.0.0.1:5000/actualizarProblema/', true);
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xhr.send(`nombre=${nombre}`);
      }
    </script>

  </body>
  <script>
      // Example starter JavaScript for disabling form submissions if there are invalid fields
      (function() {
        'use strict';

        window.addEventListener('load', function() {
          // Fetch all the forms we want to apply custom Bootstrap validation styles to
          var forms = document.getElementsByClassName('needs-validation');

          // Loop over them and prevent submission
          var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {

              const valid = form.checkValidity() === true;
              
              if(!valid) {

                //location.href='login.html';
                event.preventDefault();
                event.stopPropagation();
              }
              if(valid)
              {
                location.href='perfil2.html';
                event.preventDefault();
                event.stopPropagation();
              }
              else
              form.classList.add('was-validated');
            }, false);
          });
        }, false);
      })();
    </script>
</html>
